define(function (require, exports, module) {return function(i,j,f){var h={touch:device.feat.touch,isBadTransition:device.feat.isBadTransition,feat:{hasObserver:device.feat.observer,hasTransform:device.feat.prefixStyle("transform")!==false,hasPerspective:device.feat.prefixStyle("perspective"),hasTouch:device.feat.touch,hasPointer:navigator.msPointerEnabled,hasTransition:device.feat.prefixStyle("transition")},prefixStyle:{transform:device.feat.prefixStyle("transform"),transition:device.feat.prefixStyle("transition"),transitionTimingFunction:device.feat.prefixStyle("transitionTimingFunction"),transitionDuration:device.feat.prefixStyle("transitionDuration"),transitionDelay:device.feat.prefixStyle("transitionDelay"),transformOrigin:device.feat.prefixStyle("transformOrigin")}};var e=i.requestAnimationFrame;var k=(function(){var n={};n.prefixStyle=device.feat.prefixStyle;n.getTime=Date.now||function m(){return new Date().getTime()};n.extend=function(q,p){for(var o in p){q[o]=p[o]}};n.addEvent=function(r,q,p,o){r.addEventListener(q,p,!!o)};n.removeEvent=function(r,q,p,o){r.removeEventListener(q,p,!!o)};n.momentum=function(v,q,t,o,w,x,r){var p=(v-q),s=f.min(f.abs(p)/t,r),y,u;y=v+(s*s)/(x*2)*(p<0?-1:1);u=s/x;if(y<o){y=w?o-(w/2.5*(s/8)):o;p=f.abs(y-v);u=p/s}else{if(y>0){y=w?w/2.5*(s/8):0;p=f.abs(v)+y;u=p/s}}return{destination:f.round(y),duration:f.max(u,600)}};n.scale=function(o){return o*device.ui.scale};n.offset=function(o){var q=-o.offsetLeft,p=-o.offsetTop;while(o=o.offsetParent){q-=o.offsetLeft;p-=o.offsetTop}return{left:q,top:p}};n.preventDefaultException=function(q,p){for(var o in p){if(p[o].test(q[o])){return true}}return false};n.eventType={touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3};n.ease={quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(o){return o*(2-o)}},circular:{style:"cubic-bezier(0.1, 0.1, 0.1, 1)",fn:function(o){return f.sqrt(1-(--o*o))}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(p){var o=4;return(p=p-1)*p*((o+1)*p+o)+1}},bounce:{style:"",fn:function(o){if((o/=1)<(1/2.75)){return 7.5625*o*o}else{if(o<(2/2.75)){return 7.5625*(o-=(1.5/2.75))*o+0.75}else{if(o<(2.5/2.75)){return 7.5625*(o-=(2.25/2.75))*o+0.9375}else{return 7.5625*(o-=(2.625/2.75))*o+0.984375}}}}},elastic:{style:"",fn:function(o){var p=0.22,q=0.4;if(o===0){return 0}if(o==1){return 1}return(q*f.pow(2,-10*o)*f.sin((o-p/4)*(2*f.PI)/p)+1)}}};n.tap=function(q,o){var p=j.createEvent("Event");p.initEvent(o,true,true);p.pageX=q.pageX;p.pageY=q.pageY;q.target.dispatchEvent(p)};n.click=function(q){var p=q.target,o;if(!(/(SELECT|INPUT|TEXTAREA)/i).test(p.tagName)){o=j.createEvent("MouseEvents");o.initMouseEvent("click",true,true,q.view,1,p.screenX,p.screenY,p.clientX,p.clientY,q.ctrlKey,q.altKey,q.shiftKey,q.metaKey,0,null);o._constructed=true;p.dispatchEvent(o)}};return n})();function d(o,m){this.wrapper=typeof o=="string"?j.querySelector(o):o;this.scroller=this.wrapper.children[0];this.scrollerStyle=this.scroller.style;this.options={resizeScrollbars:true,mouseWheelSpeed:20,snapThreshold:0.15,infiniteType:"equal",infiniteUseTransform:true,infiniteCacheBuffer:50,deceleration:0.002,speedLimit:6,startX:0,startY:0,scrollY:true,directionLockThreshold:5,momentum:true,bounce:true,bounceTime:600,bounceEasing:"",preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:true,useTransition:true,useTransform:true};for(var n in m){this.options[n]=m[n]}this.translateZ=this.options.HWCompositing&&h.feat.hasPerspective?" translateZ(0)":"";this.options.useTransition=h.feat.hasTransition&&this.options.useTransition;this.options.useTransform=h.feat.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===true?"vertical":this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough=="vertical"?false:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough=="horizontal"?false:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing=="string"?k.ease[this.options.bounceEasing]||k.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;if(this.options.tap===true){this.options.tap="tap"}if(h.isBadTransition&&this.options.useTransition&&this.options.shrinkScrollbars=="scale"){this.options.shrinkScrollbars=="clip"}this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1;this.options.infiniteUseTransform=this.options.infiniteUseTransform&&this.options.useTransform;this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);
this.enable()}d.prototype={_init:function(){this._initEvents();if(this.options.scrollbars||this.options.indicators){this._initIndicators()}if(this.options.mouseWheel){this._initWheel()}if(this.options.snap){this._initSnap()}if(this.options.keyBindings){this._initKeys()}if(this.options.infiniteElements){this._initInfinite()}},destroy:function(){this._initEvents(true);this._execEvent("destroy")},_transitionEnd:function(m){if(m.target!=this.scroller||!this.isInTransition){return}this._transitionTime();if(!this.resetPosition(this.options.bounceTime)){this.isInTransition=false;this._execEvent("scrollEnd")}},_start:function(o){if(k.eventType[o.type]!=1){if(o.button!==0){return}}if(!this.enabled||(this.initiated&&k.eventType[o.type]!==this.initiated)){return}if(this.options.preventDefault&&!k.preventDefaultException(o.target,this.options.preventDefaultException)){o.preventDefault()}var m=o.touches?o.touches[0]:o,n=0,p;this.initiated=k.eventType[o.type];this.moved=false;this.distX=0;this.distY=0;this.trendX=0;this.trendY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this.process=true;if(this.options.useTransition&&this.isInTransition){if(h.isBadTransition){n=0.0001;if(this.trendX>=0&&this.trendY>=0&&this.bounceScope==false){this.x+=this.dropX;this.y+=this.dropY}this.transitionGap=true}this._transitionTime(n);this._translate(this.x,this.y);this.isInTransition=false;this._execEvent("scrollEnd","break")}else{if(!this.options.useTransition&&this.isAnimating){this.isAnimating=false;this._execEvent("scrollEnd","break")}}this.startTime=k.getTime();this.dropX=0;this.dropY=0;this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=m.pageX;this.pointY=m.pageY;this._execEvent("beforeScrollStart")},_move:function(r){if(!this.enabled||k.eventType[r.type]!==this.initiated){return}if(this.options.preventDefault){r.preventDefault()}if(this.transitionGap){this._transitionTime();this.transitionGap=false}var u=r.touches?r.touches[0]:r,o=u.pageX-this.pointX,n=u.pageY-this.pointY,s=k.getTime(),m,w,q,p,v,t;this.pointX=u.pageX;this.pointY=u.pageY;this.distX+=o;this.distY+=n;q=f.abs(this.distX);p=f.abs(this.distY);if(s-this.endTime>300&&(q<k.scale(10)&&p<k.scale(10))){return}if(!this.directionLocked&&!this.options.freeScroll){if(q>p+this.options.directionLockThreshold){this.directionLocked="h"}else{if(p>=q+this.options.directionLockThreshold){this.directionLocked="v"}else{this.directionLocked="n"}}}if(this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical"){r.preventDefault()}else{if(this.options.eventPassthrough=="horizontal"){this.initiated=false;return}}n=0}else{if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal"){r.preventDefault()}else{if(this.options.eventPassthrough=="vertical"){this.initiated=false;return}}o=0}}o=this.hasHorizontalScroll?o:0;n=this.hasVerticalScroll?n:0;m=this.x+o;w=this.y+n;if(m>0||m<this.maxScrollX){m=this.options.bounce?this.x+o/2:m>0?0:this.maxScrollX}if(w>0||w<this.maxScrollY){w=this.options.bounce?this.y+n/2:w>0?0:this.maxScrollY}v=o>0?-1:o<0?1:0;t=n>0?-1:n<0?1:0;this.trendX=this.directionX==v?1:-1;this.trendY=this.directionY==t?1:-1;this.directionX=v;this.directionY=t;if(!this.moved){this._execEvent("scrollStart")}this.moved=true;this._translate(m,w);if(s-this.startTime>300){this.startTime=s;this.startX=this.x;this.startY=this.y}this._execEvent("scroll","moving")},_end:function(s){if(!this.enabled||k.eventType[s.type]!==this.initiated){return}if(this.options.preventDefault&&!k.preventDefaultException(s.target,this.options.preventDefaultException)){s.preventDefault()}var u=s.changedTouches?s.changedTouches[0]:s,o,n,r=k.getTime()-this.startTime,m=f.round(this.x),x=f.round(this.y),w=f.abs(m-this.startX),v=f.abs(x-this.startY),p=0,t="";this.isInTransition=false;this.initiated=0;this.endTime=k.getTime();if(this.resetPosition(this.options.bounceTime)){return}this.scrollTo(m,x);if(!this.moved){if(this.options.tap){k.tap(s,this.options.tap)}if(this.options.click){k.click(s)}this._execEvent("scrollCancel");return}if(this._events.flick&&r<200&&w<k.scale(100)&&v<k.scale(100)){this._execEvent("flick");return}if(this.options.momentum&&r<300){o=this.hasHorizontalScroll?k.momentum(this.x,this.startX,r,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration,this.options.speedLimit):{destination:m,duration:0};n=this.hasVerticalScroll?k.momentum(this.y,this.startY,r,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration,this.options.speedLimit):{destination:x,duration:0};m=o.destination;x=n.destination;p=f.max(o.duration,n.duration);this.isInTransition=true}if(this.options.snap){var q=this._nearestSnap(m,x);this.currentPage=q;p=this.options.snapSpeed||f.max(f.max(f.min(f.abs(m-q.x),1000),f.min(f.abs(x-q.y),1000)),300);m=q.x;x=q.y;this.directionX=0;this.directionY=0;t=this.options.bounceEasing}if(m!=this.x||x!=this.y){if(m>0||m<this.maxScrollX||x>0||x<this.maxScrollY){t=k.ease.quadratic
}this.scrollTo(m,x,p,t);this.process=false;return}this._execEvent("scrollEnd")},_resize:function(){var m=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){m.refresh()},this.options.resizePolling)},resetPosition:function(n){var m=this.x,o=this.y;n=n||0;if(!this.hasHorizontalScroll||this.x>0){m=0}else{if(this.x<this.maxScrollX){m=this.maxScrollX}}if(!this.hasVerticalScroll||this.y>0){o=0}else{if(this.y<this.maxScrollY){o=this.maxScrollY}}if(m==this.x&&o==this.y){return this.bounceScope=false}this.scrollTo(m,o,n,this.options.bounceEasing);return this.bounceScope=true},disable:function(){this.enabled=false},enable:function(){this.enabled=true},refresh:function(){var m=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;if(!this.options.infiniteElements){this.scrollerWidth=this.scroller.offsetWidth;this.scrollerHeight=this.scroller.offsetHeight}this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;if(!this.hasHorizontalScroll){this.maxScrollX=0;this.scrollerWidth=this.wrapperWidth}if(!this.hasVerticalScroll){this.maxScrollY=0;this.scrollerHeight=this.wrapperHeight}this.endTime=0;this.directionX=0;this.directionY=0;this.wrapperOffset=k.offset(this.wrapper);this._execEvent("refresh");this.resetPosition()},on:function(q,p){var o=q.split(" ");for(var n=0,m=o.length;n<m;n++){var q=o[n];if(!this._events[q]){this._events[q]=[]}this._events[q].push(p)}},off:function(r,q){var p=r.split(" ");for(var o=0,m=p.length;o<m;o++){var r=p[o];if(!this._events[r]){return}var n=this._events[r].indexOf(q);if(n>-1){this._events[r].splice(n,1)}}},_execEvent:function(o){if(!this._events[o]){return}var n=0,m=this._events[o].length;if(!m){return}for(;n<m;n++){this._events[o][n].apply(this,[].slice.call(arguments,1))}},scrollBy:function(m,p,n,o){m=this.x+m;p=this.y+p;n=n||0;this.scrollTo(m,p,n,o)},scrollTo:function(m,p,n,o){o=o||k.ease.circular;this.isInTransition=this.options.useTransition&&n>0;if(!n||(this.options.useTransition&&o.style)){if(this.options.useTransition){this._transitionTimingFunction(o.style);this._transitionTime(n)}this._translate(m,p);this._transitionScroll()}else{this._animate(m,p,n,o.fn)}},scrollToElement:function(n,o,m,r,q){n=n.nodeType?n:this.scroller.querySelector(n);if(!n){return}var p=k.offset(n);p.left-=this.wrapperOffset.left;p.top-=this.wrapperOffset.top;if(m===true){m=f.round(n.offsetWidth/2-this.wrapper.offsetWidth/2)}if(r===true){r=f.round(n.offsetHeight/2-this.wrapper.offsetHeight/2)}p.left-=m||0;p.top-=r||0;p.left=p.left>0?0:p.left<this.maxScrollX?this.maxScrollX:p.left;p.top=p.top>0?0:p.top<this.maxScrollY?this.maxScrollY:p.top;o=o===undefined||o===null||o==="auto"?f.max(f.abs(this.x-p.left),f.abs(this.y-p.top)):o;this.scrollTo(p.left,p.top,o,q)},_transitionTime:function(n){n=n||0;this.scrollerStyle[h.prefixStyle.transitionDuration]=n+"ms";if(this.indicators){for(var m=this.indicators.length;m--;){this.indicators[m].transitionTime(n)}}},_transitionTimingFunction:function(n){this.scrollerStyle[h.prefixStyle.transitionTimingFunction]=n;if(this.indicators){for(var m=this.indicators.length;m--;){this.indicators[m].transitionTimingFunction(n)}}},_transitionScroll:function(){var n=this;function m(){if(!n.isInTransition){return}var o=n.getComputedPosition();n.dropX=(o.x-n.x)||n.dropX;n.dropY=(o.y-n.y)||n.dropY;n.x=o.x;n.y=o.y;n._execEvent("scroll");e(m)}m()},_translate:function(m,o){if(this.options.useTransform){this.scrollerStyle[h.prefixStyle.transform]="translate("+m+"px,"+o+"px)"+this.translateZ}else{m=f.round(m);o=f.round(o);this.scrollerStyle.left=m+"px";this.scrollerStyle.top=o+"px"}this.x=m;this.y=o;if(this.indicators){for(var n=this.indicators.length;n--;){this.indicators[n].updatePosition()}}},_observer:function(m,o){var n=this;m.observer({childList:true,subtree:true,characterData:true},function(p){if(p.length){o.call(n)}})},_initEvents:function(m){var n=m?k.removeEvent:k.addEvent,o=this.options.bindToWrapper?this.wrapper:i;n(i,"orientationchange",this);n(i,"resize",this);if(this.options.click){n(this.wrapper,"click",this,true)}if(!this.options.disableMouse){n(this.wrapper,"mousedown",this);n(o,"mousemove",this);n(o,"mousecancel",this);n(o,"mouseup",this)}if(h.feat.hasPointer&&!this.options.disablePointer){n(this.wrapper,"MSPointerDown",this);n(o,"MSPointerMove",this);n(o,"MSPointerCancel",this);n(o,"MSPointerUp",this)}if(h.feat.hasTouch&&!this.options.disableTouch){n(this.wrapper,"touchstart",this);n(o,"touchmove",this);n(o,"touchcancel",this);n(o,"touchend",this)}n(this.scroller,"transitionend",this);n(this.scroller,"webkitTransitionEnd",this);n(this.scroller,"oTransitionEnd",this);n(this.scroller,"MSTransitionEnd",this);if(!this.options.infiniteElements){this._observer(this.scroller,function(){this.refresh()})}},getComputedPosition:function(){var n=i.getComputedStyle(this.scroller,null),m,o;
if(this.options.useTransform){n=n[h.prefixStyle.transform].split(")")[0].split(", ");m=+(n[12]||n[4]);o=+(n[13]||n[5])}else{m=+n.left.replace(/[^-\d.]/g,"");o=+n.top.replace(/[^-\d.]/g,"")}return{x:m,y:o}},_initIndicators:function(){var o=this.options.interactiveScrollbars,q=typeof this.options.scrollbars!="string",s=[],n;var r=this;this.indicators=[];if(this.options.scrollbars){if(this.options.scrollY){n={el:g("v",o,this.options.scrollbars),interactive:o,defaultScrollbars:true,customStyle:q,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:false};this.wrapper.appendChild(n.el);s.push(n)}if(this.options.scrollX){n={el:g("h",o,this.options.scrollbars),interactive:o,defaultScrollbars:true,customStyle:q,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:false};this.wrapper.appendChild(n.el);s.push(n)}}if(this.options.indicators){s=s.concat(this.options.indicators)}for(var p=s.length;p--;){this.indicators.push(new l(this,s[p]))}function m(u){for(var t=r.indicators.length;t--;){u.call(r.indicators[t])}}if(this.options.fadeScrollbars){this.on("scrollEnd",function(){m(function(){this.fade()})});this.on("scrollCancel",function(){m(function(){this.fade()})});this.on("scrollStart",function(){m(function(){this.fade(1)})});this.on("beforeScrollStart",function(){m(function(){this.fade(1,true)})})}this.on("refresh",function(){m(function(){this.refresh()})});this.on("modify",function(){m(function(){this.refresh()})});this.on("destroy",function(){m(function(){this.destroy()});delete this.indicators})},_initWheel:function(){k.addEvent(this.wrapper,"wheel",this);k.addEvent(this.wrapper,"mousewheel",this);k.addEvent(this.wrapper,"DOMMouseScroll",this);this.on("destroy",function(){k.removeEvent(this.wrapper,"wheel",this);k.removeEvent(this.wrapper,"mousewheel",this);k.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(q){if(!this.enabled){return}q.preventDefault();q.stopPropagation();var o,n,r,p,m=this;if(this.wheelTimeout===undefined){m._execEvent("scrollStart")}clearTimeout(this.wheelTimeout);this.wheelTimeout=setTimeout(function(){m._execEvent("scrollEnd");m.wheelTimeout=undefined},400);if("deltaX" in q){o=-q.deltaX;n=-q.deltaY}else{if("wheelDeltaX" in q){o=q.wheelDeltaX/120*this.options.mouseWheelSpeed;n=q.wheelDeltaY/120*this.options.mouseWheelSpeed}else{if("wheelDelta" in q){o=n=q.wheelDelta/120*this.options.mouseWheelSpeed}else{if("detail" in q){o=n=-q.detail/3*this.options.mouseWheelSpeed}else{return}}}}o*=this.options.invertWheelDirection;n*=this.options.invertWheelDirection;if(!this.hasVerticalScroll){o=n;n=0}if(this.options.snap){r=this.currentPage.pageX;p=this.currentPage.pageY;if(o>0){r--}else{if(o<0){r++}}if(n>0){p--}else{if(n<0){p++}}this.goToPage(r,p);return}r=this.x+f.round(this.hasHorizontalScroll?o:0);p=this.y+f.round(this.hasVerticalScroll?n:0);if(r>0){r=0}else{if(r<this.maxScrollX){r=this.maxScrollX}}if(p>0){p=0}else{if(p<this.maxScrollY){p=this.maxScrollY}}this.scrollTo(r,p,0);this._execEvent("scroll")},_initSnap:function(){this.currentPage={};if(typeof this.options.snap=="string"){this.options.snap=this.scroller.querySelectorAll(this.options.snap)}this.on("refresh",function(){var u=0,s,q=0,p,t,r,w=0,v,A=this.options.snapStepX||this.wrapperWidth,z=this.options.snapStepY||this.wrapperHeight,o;this.pages=[];if(!this.wrapperWidth||!this.wrapperHeight||!this.scrollerWidth||!this.scrollerHeight){return}if(this.options.snap===true){t=f.round(A/2);r=f.round(z/2);while(w>-this.scrollerWidth){this.pages[u]=[];s=0;v=0;while(v>-this.scrollerHeight){this.pages[u][s]={x:f.max(w,this.maxScrollX),y:f.max(v,this.maxScrollY),width:A,height:z,cx:w-t,cy:v-r};v-=z;s++}w-=A;u++}}else{o=this.options.snap;s=o.length;p=-1;for(;u<s;u++){if(u===0||o[u].offsetLeft<=o[u-1].offsetLeft){q=0;p++}if(!this.pages[q]){this.pages[q]=[]}w=f.max(-o[u].offsetLeft,this.maxScrollX);v=f.max(-o[u].offsetTop,this.maxScrollY);t=w-f.round(o[u].offsetWidth/2);r=v-f.round(o[u].offsetHeight/2);this.pages[q][p]={x:w,y:v,width:o[u].offsetWidth,height:o[u].offsetHeight,cx:t,cy:r};if(w>this.maxScrollX){q++}}}this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0);if(this.options.snapThreshold%1===0){this.snapThresholdX=this.options.snapThreshold;this.snapThresholdY=this.options.snapThreshold}else{this.snapThresholdX=f.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold);this.snapThresholdY=f.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold)}});this.on("flick",function(){var m=this.options.snapSpeed||f.max(f.max(f.min(f.abs(this.x-this.startX),1000),f.min(f.abs(this.y-this.startY),1000)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,m)})},_nearestSnap:function(o,r){if(!this.pages.length){return{x:0,y:0,pageX:0,pageY:0}}var q=0,p=this.pages.length,n=0;if(f.abs(o-this.absStartX)<this.snapThresholdX&&f.abs(r-this.absStartY)<this.snapThresholdY){return this.currentPage
}if(o>0){o=0}else{if(o<this.maxScrollX){o=this.maxScrollX}}if(r>0){r=0}else{if(r<this.maxScrollY){r=this.maxScrollY}}for(;q<p;q++){if(o>=this.pages[q][0].cx){o=this.pages[q][0].x;break}}p=this.pages[q].length;for(;n<p;n++){if(r>=this.pages[0][n].cy){r=this.pages[0][n].y;break}}if(q==this.currentPage.pageX){q+=this.directionX;if(q<0){q=0}else{if(q>=this.pages.length){q=this.pages.length-1}}o=this.pages[q][0].x}if(n==this.currentPage.pageY){n+=this.directionY;if(n<0){n=0}else{if(n>=this.pages[0].length){n=this.pages[0].length-1}}r=this.pages[0][n].y}return{x:o,y:r,pageX:q,pageY:n}},goToPage:function(m,r,n,q){q=q||this.options.bounceEasing;if(m>=this.pages.length){m=this.pages.length-1}else{if(m<0){m=0}}if(r>=this.pages[m].length){r=this.pages[m].length-1}else{if(r<0){r=0}}var p=this.pages[m][r].x,o=this.pages[m][r].y;n=n===undefined?this.options.snapSpeed||f.max(f.max(f.min(f.abs(p-this.x),1000),f.min(f.abs(o-this.y),1000)),300):n;this.currentPage={x:p,y:o,pageX:m,pageY:r};this.scrollTo(p,o,n,q)},next:function(n,p){var m=this.currentPage.pageX,o=this.currentPage.pageY;m++;if(m>=this.pages.length&&this.hasVerticalScroll){m=0;o++}this.goToPage(m,o,n,p)},prev:function(n,p){var m=this.currentPage.pageX,o=this.currentPage.pageY;m--;if(m<0&&this.hasVerticalScroll){m=0;o--}this.goToPage(m,o,n,p)},_initKeys:function(o){var n={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};var m;if(typeof this.options.keyBindings=="object"){for(m in this.options.keyBindings){if(typeof this.options.keyBindings[m]=="string"){this.options.keyBindings[m]=this.options.keyBindings[m].toUpperCase().charCodeAt(0)}}}else{this.options.keyBindings={}}for(m in n){this.options.keyBindings[m]=this.options.keyBindings[m]||n[m]}k.addEvent(i,"keydown",this);this.on("destroy",function(){k.removeEvent(i,"keydown",this)})},_key:function(r){if(!this.enabled){return}var m=this.options.snap,s=m?this.currentPage.pageX:this.x,q=m?this.currentPage.pageY:this.y,o=k.getTime(),n=this.keyTime||0,p=0.25,t;if(this.options.useTransition&&this.isInTransition){t=this.getComputedPosition();this._translate(f.round(t.x),f.round(t.y));this.isInTransition=false}this.keyAcceleration=o-n<200?f.min(this.keyAcceleration+p,50):0;switch(r.keyCode){case this.options.keyBindings.pageUp:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){s+=m?1:this.wrapperWidth}else{q+=m?1:this.wrapperHeight}break;case this.options.keyBindings.pageDown:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){s-=m?1:this.wrapperWidth}else{q-=m?1:this.wrapperHeight}break;case this.options.keyBindings.end:s=m?this.pages.length-1:this.maxScrollX;q=m?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:s=0;q=0;break;case this.options.keyBindings.left:s+=m?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:q+=m?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:s-=m?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:q-=m?1:5+this.keyAcceleration>>0;break;default:return}if(m){this.goToPage(s,q);return}if(s>0){s=0;this.keyAcceleration=0}else{if(s<this.maxScrollX){s=this.maxScrollX;this.keyAcceleration=0}}if(q>0){q=0;this.keyAcceleration=0}else{if(q<this.maxScrollY){q=this.maxScrollY;this.keyAcceleration=0}}this.scrollTo(s,q,0);this.keyTime=o},_animate:function(v,u,p,m){var s=this,r=this.x,q=this.y,n=k.getTime(),t=n+p;function o(){var w=k.getTime(),y,x,z;if(w>=t){s.isAnimating=false;s._translate(v,u);if(!s.resetPosition(s.options.bounceTime)){s._execEvent("scrollEnd")}return}w=(w-n)/p;z=m(w);y=(v-r)*z+r;x=(u-q)*z+q;s._translate(y,x);if(s.isAnimating){e(o)}s._execEvent("scroll")}this.isAnimating=true;o()},_initInfinite:function(){var p=this;this.infiniteElements=this.options.infiniteElements;this.infiniteLength=this.infiniteElements.length;this.infiniteCache=[];this.infiniteCacheLength=0;this.scrollerHeight=0;switch(this.options.infiniteType){case"equal":this.infiniteMaster=this.infiniteElements[0];this.infiniteElementWidth=this.infiniteMaster.offsetWidth;this.infiniteElementHeight=this.infiniteMaster.offsetHeight;this.infiniteContainerWidth=this.infiniteLength*this.infiniteElementWidth;this.infiniteContainerHeight=this.infiniteLength*this.infiniteElementHeight;break;case"differ":this.infinitePhase=0;this.infiniteMaxPhase=0;this.infiniteContentWidth=0;this.infiniteContentHeight=0;this.infiniteContentPos=[0,0];this.infiniteContainerCenter=0;this.infiniteElementsPos=[];this.infiniteElementsEdge=[0,0];this.infinitePhaseElements=[];break}this.on("refresh",function(){switch(this.options.infiniteType){case"equal":if(this.options.scrollX){var t=f.ceil(this.wrapperWidth/this.infiniteElementWidth);this.infiniteUpperBufferSize=f.floor((this.infiniteLength-t)/2)}else{if(this.options.scrollY){var t=f.ceil(this.wrapperHeight/this.infiniteElementHeight);this.infiniteUpperBufferSize=f.floor((this.infiniteLength-t)/2)}}break;case"differ":if(this.infiniteUpdated){this.refreshInfiniteAll()}break}this.reorderInfinite()});this.on("infiniteInited",function(){this.scroller.style.visibility="visible";
this.refresh()});if(this.options.infiniteType=="differ"){for(var o=0,n=this.infiniteElements.length;o<n;o++){this._observer(this.infiniteElements[o],function(){if(!this.isInTransition&&!this.isAnimating){this.refresh()}})}}var m=0,s=0,r=this.options.infiniteMinSize||100,q=this.options.infiniteType;this.on("scroll scrollEnd",function(t){if(t=="moving"||t=="break"||this.process){return}if(f.abs(this.y-s)>=r||f.abs(this.x-m)>=r){m=this.x;s=this.y;switch(q){case"equal":this.reorderInfinite();break;case"differ":if(this.infiniteUpdated){this.reorderInfinite()}break}}})},datasetInfinite:function(o){if(this.datasetInfinite.lock===true){return}var m=this;var n=this.infiniteCache.length;this.datasetInfinite.lock=true;this.options.dataset.call(this,n,function(p){if(p===undefined||!p.length){return m.datasetInfinite.lock=true}m.updateInfiniteCache(n,p);o&&o.call(m,n);m.datasetInfinite.lock=false})},reorderInfinite:function(){switch(this.options.infiniteType){case"equal":var v=this,C,t=0,q=this.infiniteLength,x=0,o=0,w,A,n,p,s,z,y,B,u,r=[];if(this.options.scrollX){A=-this.x;n=A+this.wrapperWidth/2;B=this.infiniteElementWidth;y=this.infiniteContainerWidth}else{if(this.options.scrollY){A=-this.y;n=A+this.wrapperHeight/2;B=this.infiniteElementHeight;y=this.infiniteContainerHeight}}p=f.max(f.floor(A/B)-this.infiniteUpperBufferSize,0),s=f.floor(p/this.infiniteLength),z=p-s*this.infiniteLength,u=this.infiniteCacheLength-p;while(t<q){w=t*B+s*y;C=this.infiniteElements[t];C._index=t;if(z>t){w+=B*this.infiniteLength}if(C._pos!==w){C._phase=w/B;if(C._phase<this.options.infiniteLimit){r.push(C);this.updateInfinitePos(C,w)}}t++}this.updateInfiniteContent(r);if(u<=this.options.infiniteCacheBuffer){this.datasetInfinite(function(D){if(D==0){this.updateInfiniteContent(r);this._execEvent("infiniteInited")}if(this.options.scrollX){this.scrollerWidth=this.infiniteElementWidth*this.infiniteCacheLength}else{if(this.options.scrollY){this.scrollerHeight=this.infiniteElementHeight*this.infiniteCacheLength}}this.refresh()})}break;case"differ":var v=this,A,n,m,r=[];A=-this.y;n=A+this.wrapperHeight/2;m=this.infiniteContainerCenter-n;m=m===0?0:m<0?-1:1;this.infiniteContainerCenter=n;this.infiniteContentHeight=this.infiniteContentPos[1]-this.infiniteContentPos[0];this.infiniteBufferSize=f.floor((this.infiniteContentHeight-this.wrapperHeight)/2);this.infiniteSurplus=this.infiniteCacheLength-this.infinitePhase;if(this.infiniteSurplus<=this.options.infiniteCacheBuffer){this.datasetInfinite(function(D){this.rearrangeInfinite(D===0?-1:0,function(){if(D===0){v._execEvent("infiniteInited")}})});if(this.infiniteCacheLength===0){return}}this.rearrangeInfinite(m);break}},detectInfiniteBalance:function(m){var n=this.infiniteContentPos[1]+this.infiniteContentPos[0]-2*this.infiniteContainerCenter;return n*2},rearrangeInfinite:function(m,t){var p=this,v,r,w,s,q,u;this.infiniteUpdated=false;function o(){if(p.detectInfiniteBalance(m)<0||p.infinitePhase<p.infiniteLength){p.infiniteSurplus=p.infiniteCacheLength-p.infinitePhase;if(p.infiniteSurplus<0){return p._execEvent("infiniteCachedEnd")}s=p.infinitePhase++;q=s%p.infiniteLength;u=f.max((s+1-p.infiniteLength)%p.infiniteLength,0);v=p.infiniteElements[q];v._index=q;v._phase=s;r=p.infiniteContentPos[1];p.updateInfinitePos(v,r);p.updateInfiniteContent([v]);w=v.offsetHeight;p.infiniteElementsPos[q]=[r,r+w];p.infiniteElementsEdge=[u,q];p.infiniteContentPos[0]=p.infiniteElementsPos[u][0];p.infiniteContentPos[1]+=w;p.refreshInfinite(s,r+w);e(o)}else{if(t){t.call(p)}p.infiniteUpdated=true}}function n(){if(p.detectInfiniteBalance(m)>0){if(p.infinitePhase-p.infiniteLength<=0){return}s=--p.infinitePhase;q=s%p.infiniteLength;u=(s-1)%p.infiniteLength;v=p.infiniteElements[q];v._index=q;v._phase=s-p.infiniteLength;p.updateInfiniteContent([v]);w=v.offsetHeight;r=p.infiniteContentPos[0]-w;p.updateInfinitePos(v,r);p.infiniteElementsPos[q]=[r,r+w];p.infiniteElementsEdge=[q,u];p.infiniteContentPos[0]-=w;p.infiniteContentPos[1]=p.infiniteElementsPos[u][1];e(n)}else{if(t){t.call(p)}p.infiniteUpdated=true}}switch(m){case -1:o();break;case 1:n();break}clearTimeout(this.infiniteUpdatedTimeout);this.infiniteUpdatedTimeout=setTimeout(function(){p.infiniteUpdated=true},100)},refreshInfinite:function(m,n){if(m<=this.infiniteMaxPhase){return}this.scrollerHeight=n+this.infiniteSurplus*(n/m);this.maxScrollY=this.wrapperHeight-this.scrollerHeight;if(this.infiniteSurplus==0||m%(this.infiniteLength*10)==0){this._execEvent("modify")}this.infiniteMaxPhase=m},refreshInfiniteAll:function(){var o,n=this.infiniteLength,r=this.infiniteElementsEdge[0],p,t,q,u,m,s=this.infiniteContentPos[1]-this.infiniteContentPos[0];this.infiniteContentPos[1]=this.infiniteContentPos[0];for(o=0;o<n;o++){p=(r+o)%this.infiniteLength;t=this.infiniteElements[p];u=t.offsetHeight;q=this.infiniteContentPos[1];this.updateInfinitePos(t,q);this.infiniteElementsPos[p]=[q,q+u];this.infiniteContentPos[1]+=u}m=this.infiniteContentPos[1]-this.infiniteContentPos[0]-s;this.scrollerHeight+=m;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;
this._execEvent("modify")},updateInfinitePos:function(m,n){m._pos=n;if(this.options.scrollX){if(this.options.infiniteUseTransform){m.style[h.prefixStyle.transform]="translate("+n+"px, 0)"+this.translateZ}else{m.style.left=n+"px"}}else{if(this.options.scrollY){if(this.options.infiniteUseTransform){m.style[h.prefixStyle.transform]="translate(0, "+n+"px)"+this.translateZ}else{m.style.top=n+"px"}}}},updateInfiniteContent:function(q){var p,o;for(var n=0,m=q.length;n<m;n++){o=q[n];p=this.infiniteCache[o._phase];if(this.options.dataFiller&&p){this.options.dataFiller.call(this,o,p)}}},updateInfiniteCache:function(p,o){for(var n=0,m=o.length;n<m;n++){this.infiniteCache[p++]=o[n]}this.infiniteCacheLength=p},handleEvent:function(m){switch(m.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(m);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(m);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(m);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(m);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(m);break;case"keydown":this._key(m);break;case"click":if(!m._constructed){m.preventDefault();m.stopPropagation()}break}}};function g(p,n,o){var q=j.createElement("div"),m=j.createElement("div");if(o===true){q.style.cssText="position: absolute; z-index:9999";m.style.cssText="position: absolute; "+k.prefixStyle("box-sizing")+": border-box; background: rgba(0,0,0,0.4); "+k.prefixStyle("border-radius")+": "+k.scale(2.5)+"px"}m.className="iScrollIndicator";if(p=="h"){if(o===true){q.style.cssText+="; height:"+k.scale(2.5)+"px; left: "+k.scale(2)+"px; right: "+k.scale(2)+"px; bottom: "+k.scale(4)+"px";m.style.height="100%"}q.className="iScrollHorizontalScrollbar"}else{if(o===true){q.style.cssText+="; width: "+k.scale(2.5)+"px; bottom: "+k.scale(2)+"px; top: "+k.scale(2)+"px; right: "+k.scale(4)+"px";m.style.width="100%"}q.className="iScrollVerticalScrollbar"}q.style.cssText+="; overflow: hidden";if(!n){q.style.pointerEvents="none"}q.appendChild(m);return q}function l(m,n){this.wrapper=typeof n.el=="string"?j.querySelector(n.el):n.el;this.wrapperStyle=this.wrapper.style;this.indicator=this.wrapper.children[0];this.indicatorStyle=this.indicator.style;this.scroller=m;this.options={listenX:true,listenY:true,interactive:false,resize:true,defaultScrollbars:false,shrink:false,fade:false,speedRatioX:0,speedRatioY:0};for(var o in n){this.options[o]=n[o]}this.sizeRatioX=1;this.sizeRatioY=1;this.maxPosX=0;this.maxPosY=0;if(this.options.interactive){if(!this.options.disableTouch){k.addEvent(this.indicator,"touchstart",this);k.addEvent(i,"touchend",this)}if(!this.options.disablePointer){k.addEvent(this.indicator,"MSPointerDown",this);k.addEvent(i,"MSPointerUp",this)}if(!this.options.disableMouse){k.addEvent(this.indicator,"mousedown",this);k.addEvent(i,"mouseup",this)}}if(this.options.fade){this.wrapperStyle[h.prefixStyle.transform]=this.scroller.translateZ;this.wrapperStyle[h.prefixStyle.transitionDuration]="0ms";this.wrapperStyle.opacity="0"}}l.prototype={handleEvent:function(m){switch(m.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(m);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(m);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(m);break}},destroy:function(){if(this.options.interactive){k.removeEvent(this.indicator,"touchstart",this);k.removeEvent(this.indicator,"MSPointerDown",this);k.removeEvent(this.indicator,"mousedown",this);k.removeEvent(i,"touchmove",this);k.removeEvent(i,"MSPointerMove",this);k.removeEvent(i,"mousemove",this);k.removeEvent(i,"touchend",this);k.removeEvent(i,"MSPointerUp",this);k.removeEvent(i,"mouseup",this)}if(this.options.defaultScrollbars){this.wrapper.parentNode.removeChild(this.wrapper)}},_start:function(n){var m=n.touches?n.touches[0]:n;n.preventDefault();n.stopPropagation();this.transitionTime();this.initiated=true;this.moved=false;this.lastPointX=m.pageX;this.lastPointY=m.pageY;this.startTime=k.getTime();if(!this.options.disableTouch){k.addEvent(i,"touchmove",this)}if(!this.options.disablePointer){k.addEvent(i,"MSPointerMove",this)}if(!this.options.disableMouse){k.addEvent(i,"mousemove",this)}this.scroller._execEvent("beforeScrollStart")},_move:function(r){var n=r.touches?r.touches[0]:r,o,m,s,q,p=k.getTime();if(!this.moved){this.scroller._execEvent("scrollStart")}this.moved=true;o=n.pageX-this.lastPointX;this.lastPointX=n.pageX;m=n.pageY-this.lastPointY;this.lastPointY=n.pageY;s=this.x+o;q=this.y+m;this._pos(s,q);r.preventDefault();r.stopPropagation()},_end:function(o){if(!this.initiated){return}this.initiated=false;o.preventDefault();o.stopPropagation();k.removeEvent(i,"touchmove",this);k.removeEvent(i,"MSPointerMove",this);k.removeEvent(i,"mousemove",this);
if(this.scroller.options.snap){var m=this.scroller._nearestSnap(this.scroller.x,this.scroller.y);var n=this.options.snapSpeed||f.max(f.max(f.min(f.abs(this.scroller.x-m.x),1000),f.min(f.abs(this.scroller.y-m.y),1000)),300);if(this.scroller.x!=m.x||this.scroller.y!=m.y){this.scroller.directionX=0;this.scroller.directionY=0;this.scroller.currentPage=m;this.scroller.scrollTo(m.x,m.y,n,this.scroller.options.bounceEasing)}}if(this.moved){this.scroller._execEvent("scrollEnd")}},transitionTime:function(m){m=m||0;this.indicatorStyle[h.prefixStyle.transitionDuration]=m+"ms"},transitionTimingFunction:function(m){this.indicatorStyle[h.prefixStyle.transitionTimingFunction]=m},refresh:function(){this.transitionTime();if(this.options.listenX&&!this.options.listenY){this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none"}else{if(this.options.listenY&&!this.options.listenX){this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none"}else{this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none"}}if(this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll){$(this.wrapper).addClass("iScrollBothScrollbars").removeClass("iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right=k.scale(4)+"px"}else{this.wrapper.style.bottom=k.scale(4)+"px"}}}else{$(this.wrapper).removeClass("iScrollBothScrollbars").addClass("iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right=k.scale(2)+"px"}else{this.wrapper.style.bottom=k.scale(2)+"px"}}}var m=this.wrapper.offsetHeight;if(this.options.listenX){this.wrapperWidth=this.wrapper.clientWidth;if(this.options.resize){this.indicatorWidth=f.max(f.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||k.scale(1))),k.scale(4));this.indicatorStyle.width=this.indicatorWidth+"px"}else{this.indicatorWidth=this.indicator.clientWidth}this.maxPosX=this.wrapperWidth-this.indicatorWidth;if(this.options.shrink=="clip"){this.minBoundaryX=-this.indicatorWidth+k.scale(4);this.maxBoundaryX=this.wrapperWidth-k.scale(4)}else{this.minBoundaryX=0;this.maxBoundaryX=this.maxPosX}this.sizeRatioX=this.options.speedRatioX||(this.scroller.maxScrollX&&(this.maxPosX/this.scroller.maxScrollX))}if(this.options.listenY){this.wrapperHeight=this.wrapper.clientHeight;if(this.options.resize){this.indicatorHeight=f.max(f.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||k.scale(1))),k.scale(4));this.indicatorStyle.height=this.indicatorHeight+"px"}else{this.indicatorHeight=this.indicator.clientHeight}this.maxPosY=this.wrapperHeight-this.indicatorHeight;if(this.options.shrink=="clip"){this.minBoundaryY=-this.indicatorHeight+k.scale(4);this.maxBoundaryY=this.wrapperHeight-k.scale(4)}else{this.minBoundaryY=0;this.maxBoundaryY=this.maxPosY}this.maxPosY=this.wrapperHeight-this.indicatorHeight;this.sizeRatioY=this.options.speedRatioY||(this.scroller.maxScrollY&&(this.maxPosY/this.scroller.maxScrollY))}this.updatePosition()},updatePosition:function(){var m=this.options.listenX&&f.round(this.sizeRatioX*this.scroller.x)||0,n=this.options.listenY&&f.round(this.sizeRatioY*this.scroller.y)||0;if(!this.options.ignoreBoundaries){if(m<this.minBoundaryX){if(this.options.shrink=="scale"){this.width=f.max(this.indicatorWidth+m,k.scale(4));this.indicatorStyle.width=this.width+"px"}m=this.minBoundaryX}else{if(m>this.maxBoundaryX){if(this.options.shrink=="scale"){this.width=f.max(this.indicatorWidth-(m-this.maxPosX),k.scale(4));this.indicatorStyle.width=this.width+"px";m=this.maxPosX+this.indicatorWidth-this.width}else{m=this.maxBoundaryX}}else{if(this.options.shrink=="scale"&&this.width!=this.indicatorWidth){this.width=this.indicatorWidth;this.indicatorStyle.width=this.width+"px"}}}if(n<this.minBoundaryY){if(this.options.shrink=="scale"){this.height=f.max(this.indicatorHeight+n*3,k.scale(4));this.indicatorStyle.height=this.height+"px"}n=this.minBoundaryY}else{if(n>this.maxBoundaryY){if(this.options.shrink=="scale"){this.height=f.max(this.indicatorHeight-(n-this.maxPosY)*3,k.scale(4));this.indicatorStyle.height=this.height+"px";n=this.maxPosY+this.indicatorHeight-this.height}else{n=this.maxBoundaryY}}else{if(this.options.shrink=="scale"&&this.height!=this.indicatorHeight){this.height=this.indicatorHeight;this.indicatorStyle.height=this.height+"px"}}}}this.x=m;this.y=n;if(this.scroller.options.useTransform){this.indicatorStyle[h.prefixStyle.transform]="translate("+m+"px,"+n+"px)"+this.scroller.translateZ}else{this.indicatorStyle.left=m+"px";this.indicatorStyle.top=n+"px"}},_pos:function(m,n){if(m<0){m=0}else{if(m>this.maxPosX){m=this.maxPosX}}if(n<0){n=0}else{if(n>this.maxPosY){n=this.maxPosY}}m=this.options.listenX?f.round(m/this.sizeRatioX):this.scroller.x;n=this.options.listenY?f.round(n/this.sizeRatioY):this.scroller.y;this.scroller.scrollTo(m,n)
},fade:function(p,o){if(o&&!this.visible){return}clearTimeout(this.fadeTimeout);this.fadeTimeout=null;var n=p?250:500,m=p?0:300;p=p?"1":"0";this.wrapperStyle[h.prefixStyle.transitionDuration]=n+"ms";this.fadeTimeout=setTimeout((function(q){this.wrapperStyle.opacity=q;this.visible=+q}).bind(this,p),m)}};d.browser=h;d.utils=k;return d}});